<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Homework 8</title>
        <meta charset="UTF-8">
        <meta name = "description" content="Homework 8">
        <meta name = "author" content = "Linying Lu">
        <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
        <style>
        
        table,th,td {
            border : 1px solid black;
            border-collapse: collapse;
        }
        th,td {
            padding: 5px;
        }
        </style>
    </head>
<body>
    <h1>Homework 8 - AJAX Application</h1>

<button type="button" onclick="loadDoc()">Get CD collection</button>
<br><br>
<table id="demo"></table>

<script>
function loadDoc() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    myFunction(this);
  }
  xhttp.open("GET", "https://linyinglu086.github.io/cd_catalog.xml");
  xhttp.send();
}
function myFunction(xml) {
  const xmlDoc = xml.responseXML;
  const x = xmlDoc.getElementsByTagName("CD");
  let table="<tr><th>Artist</th><th>Title</th></tr>";
  for (let i = 0; i <x.length; i++) { 
    table += "<tr><td>" +
    x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
    "</td><td>" +
    x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
    "</td></tr>";
  }
  document.getElementById("demo").innerHTML = table;
}
</script>
<h2>Explanation of AJAX</h2>
<p>When you clicks on the "Get CD collection" button above, the loadDoc() function is executed. The loadDoc() function creates an XMLHttpRequest object, adds the function to be executed when the server response is ready, and sends the request off to the server.</p>
<p>When the server response is ready, an HTML table is built, nodes (elements) are extracted from the XML file, and it finally updates the element "demo" with the HTML table filled with XML data</p>
<h2>REST API</h2>
<p>API is an application programming interface, it allows two applications to communicate with each other. REST means Representational State Transfer, it defines
    a set of functions like GET, PUT, and DELETE, that clients can use to access server data. People can access and use the API without any key, and quickly get an JSON file, which is easy to read. The API is free to any American Companies.  
    Here is <a href="https://aws.amazon.com/what-is/api/#:~:text=API%20stands%20for%20Application%20Programming,other%20using%20requests%20and%20responses.">an Amazon articl about API</a>, if you are interested.  
</p>

<a href="Homework1.html">Go back to Homework1</a>

</body>
</html>


